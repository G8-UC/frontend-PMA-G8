{"openapi":"3.1.0","info":{"title":"Properties Market Async API","description":"\n    # Properties Market Async API\n    \n    API for managing property visit reservations from MQTT broker events.\n    \n    ## Features\n    \n    - **Real-time Data**: Receives property events from MQTT broker\n    - **Pagination**: Efficient handling of large property datasets\n    - **Filtering**: Filter by price, location, and publication date\n    - **Visit Reservations**: Track multiple visit opportunities per property\n    \n    ## Architecture\n    \n    This API follows **Hexagonal Architecture** principles:\n    - **Domain Layer**: Core business entities and rules\n    - **Application Layer**: Use cases and business logic\n    - **Infrastructure Layer**: External services (MQTT, Database)\n    - **API Layer**: HTTP endpoints and presentation\n    \n    ## Endpoints\n    \n    - `GET /api/v1/properties` - List properties with pagination and filtering\n    - `GET /api/v1/properties/{id}` - Get specific property by ID\n    - `GET /api/v1/properties/detail/{name}/{location}` - Get property with all visit reservations\n    - `GET /api/v1/health` - Health check and system status\n    \n    ## MQTT Integration\n    \n    The system automatically receives property events from the MQTT broker\n    at `broker.iic2173.org:9000` on the `properties/info` topic.\n    \n    Each event creates a new visit reservation opportunity.\n    ","version":"1.0.0"},"paths":{"/api/v1/properties":{"get":{"tags":["Properties Market API"],"summary":"Get Properties List","description":"Retrieve a paginated list of properties with optional filtering.\n    \n    **Features:**\n    - Pagination support (page, limit)\n    - Filter by maximum price\n    - Filter by location (partial match)\n    - Filter by publication date (exact match)\n    \n    **Response includes:**\n    - List of property summaries\n    - Pagination metadata\n    - Total count and pages","operationId":"get_properties_api_v1_properties_get","parameters":[{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number (1-based)","default":1,"title":"Page"},"description":"Page number (1-based)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of items per page","default":25,"title":"Limit"},"description":"Number of items per page"},{"name":"price","in":"query","required":false,"schema":{"type":"number","minimum":0,"description":"Maximum price filter","title":"Price"},"description":"Maximum price filter"},{"name":"location","in":"query","required":false,"schema":{"type":"string","description":"Location filter (partial match)","title":"Location"},"description":"Location filter (partial match)"},{"name":"date","in":"query","required":false,"schema":{"type":"string","description":"Publication date filter (YYYY-MM-DD)","title":"Date"},"description":"Publication date filter (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successfully retrieved properties","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PropertiesListResponse"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/properties/{property_id}":{"get":{"tags":["Properties Market API"],"summary":"Get Property by ID","description":"Retrieve a specific property by its unique ID.\n    \n    Returns detailed information about a single property including\n    all its attributes and metadata.","operationId":"get_property_by_id_api_v1_properties__property_id__get","parameters":[{"name":"property_id","in":"path","required":true,"schema":{"type":"string","title":"Property Id"}}],"responses":{"200":{"description":"Successfully retrieved property","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PropertyResponse"}}}},"404":{"description":"Property not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/properties/detail/{name}/{location}":{"get":{"tags":["Properties Market API"],"summary":"Get Property Detail with Visit Reservations","description":"Retrieve detailed information about a property including all its visit reservations.\n    \n    This endpoint groups properties by name and location, showing all available\n    visit reservation opportunities for the same property.","operationId":"get_property_detail_api_v1_properties_detail__name___location__get","parameters":[{"name":"name","in":"path","required":true,"schema":{"type":"string","title":"Name"}},{"name":"location","in":"path","required":true,"schema":{"type":"string","title":"Location"}}],"responses":{"200":{"description":"Successfully retrieved property detail","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PropertyDetailResponse"}}}},"404":{"description":"Property not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/health":{"get":{"tags":["Properties Market API"],"summary":"Health Check","description":"Check the health status of the application.\n    \n    Returns information about:\n    - Application status\n    - MQTT connection status\n    - Number of properties in the system\n    - Current timestamp","operationId":"get_health_api_v1_health_get","responses":{"200":{"description":"Health status information","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}}}}}},"/api/v1/purchase-requests":{"post":{"tags":["Properties Market API"],"summary":"Create Purchase Request","description":"Create a new purchase request for a property visit.\n    \n    This endpoint creates a purchase request that will be processed\n    asynchronously through the MQTT broker.","operationId":"create_purchase_request_api_v1_purchase_requests_post","requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePurchaseRequestRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchaseRequestResponse"}}}},"201":{"description":"Purchase request created successfully"},"400":{"description":"Invalid request data","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Properties Market API"],"summary":"Get Purchase Requests","description":"Retrieve a paginated list of purchase requests with optional filtering.\n    \n    **Features:**\n    - Pagination support (page, limit)\n    - Filter by group ID\n    - Filter by status (PENDING, VALIDATED, REJECTED, EXPIRED)\n    \n    **Response includes:**\n    - List of purchase requests\n    - Pagination metadata\n    - Total count and pages","operationId":"get_purchase_requests_api_v1_purchase_requests_get","parameters":[{"name":"group_id","in":"query","required":false,"schema":{"type":"string","description":"Filter by group ID","title":"Group Id"},"description":"Filter by group ID"},{"name":"status","in":"query","required":false,"schema":{"type":"string","description":"Filter by status","title":"Status"},"description":"Filter by status"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number (1-based)","default":1,"title":"Page"},"description":"Page number (1-based)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of items per page","default":25,"title":"Limit"},"description":"Number of items per page"}],"responses":{"200":{"description":"Successfully retrieved purchase requests","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PurchaseRequestListResponse"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/event-logs":{"get":{"tags":["Properties Market API"],"summary":"Get Event Logs","description":"Retrieve a paginated list of event logs with optional filtering.\n    \n    **Features:**\n    - Pagination support (page, limit)\n    - Filter by property ID\n    - Filter by group ID\n    \n    **Event Types:**\n    - NEW_VISIT: New visit availability\n    - PURCHASE_SUCCESS: Successful purchase\n    - PURCHASE_FAILED: Failed purchase\n    \n    **Response includes:**\n    - List of event logs\n    - Pagination metadata\n    - Total count and pages","operationId":"get_event_logs_api_v1_event_logs_get","parameters":[{"name":"property_id","in":"query","required":false,"schema":{"type":"string","description":"Filter by property ID","title":"Property Id"},"description":"Filter by property ID"},{"name":"group_id","in":"query","required":false,"schema":{"type":"string","description":"Filter by group ID","title":"Group Id"},"description":"Filter by group ID"},{"name":"page","in":"query","required":false,"schema":{"type":"integer","minimum":1,"description":"Page number (1-based)","default":1,"title":"Page"},"description":"Page number (1-based)"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"description":"Number of items per page","default":50,"title":"Limit"},"description":"Number of items per page"}],"responses":{"200":{"description":"Successfully retrieved event logs","content":{"application/json":{"schema":{"$ref":"#/components/schemas/EventLogListResponse"}}}},"400":{"description":"Invalid query parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/":{"get":{"tags":["Properties Market API"],"summary":"API Information","description":"Get information about the Properties Market Async API","operationId":"get_api_info_api_v1__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"CreatePurchaseRequestRequest":{"properties":{"group_id":{"type":"string","title":"Group Id","description":"ID of the group making the request"},"property_id":{"type":"string","title":"Property Id","description":"ID of the property"}},"type":"object","required":["group_id","property_id"],"title":"CreatePurchaseRequestRequest","description":"Request model for creating a purchase request."},"ErrorResponse":{"properties":{"error":{"type":"string","title":"Error"},"message":{"type":"string","title":"Message"},"code":{"type":"string","title":"Code"}},"type":"object","required":["error","message","code"],"title":"ErrorResponse","description":"Error response model."},"EventLogListResponse":{"properties":{"events":{"items":{"$ref":"#/components/schemas/EventLogResponse"},"type":"array","title":"Events"},"total_count":{"type":"integer","title":"Total Count"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["events","total_count","page","limit","total_pages"],"title":"EventLogListResponse","description":"Response model for event logs list."},"EventLogResponse":{"properties":{"id":{"type":"string","title":"Id"},"event_type":{"type":"string","title":"Event Type"},"property_id":{"type":"string","title":"Property Id"},"property_name":{"type":"string","title":"Property Name"},"property_location":{"type":"string","title":"Property Location"},"group_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Group Id"},"request_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Request Id"},"message":{"type":"string","title":"Message"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["id","event_type","property_id","property_name","property_location","group_id","request_id","message","timestamp"],"title":"EventLogResponse","description":"Response model for an event log."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"mqtt_connected":{"type":"boolean","title":"Mqtt Connected"},"properties_count":{"type":"integer","title":"Properties Count"}},"type":"object","required":["status","timestamp","mqtt_connected","properties_count"],"title":"HealthResponse","description":"Health check response."},"PropertiesListResponse":{"properties":{"properties":{"items":{"$ref":"#/components/schemas/PropertySummaryResponse"},"type":"array","title":"Properties"},"total_count":{"type":"integer","title":"Total Count"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["properties","total_count","page","limit","total_pages"],"title":"PropertiesListResponse","description":"Response model for paginated properties list."},"PropertyDetailResponse":{"properties":{"property_summary":{"$ref":"#/components/schemas/PropertySummaryResponse"},"visit_reservations":{"items":{"$ref":"#/components/schemas/PropertyResponse"},"type":"array","title":"Visit Reservations"}},"type":"object","required":["property_summary","visit_reservations"],"title":"PropertyDetailResponse","description":"Response model for property detail with all visit reservations."},"PropertyResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"price":{"type":"number","title":"Price"},"currency":{"type":"string","title":"Currency"},"bedrooms":{"type":"string","title":"Bedrooms"},"bathrooms":{"type":"string","title":"Bathrooms"},"m2":{"type":"string","title":"M2"},"location":{"type":"string","title":"Location"},"img":{"type":"string","title":"Img"},"url":{"type":"string","title":"Url"},"is_project":{"type":"boolean","title":"Is Project"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"available_visits":{"type":"integer","title":"Available Visits"}},"type":"object","required":["id","name","price","currency","bedrooms","bathrooms","m2","location","img","url","is_project","timestamp","created_at","available_visits"],"title":"PropertyResponse","description":"Response model for a single property."},"PropertySummaryResponse":{"properties":{"id":{"type":"string","title":"Id"},"name":{"type":"string","title":"Name"},"price":{"type":"number","title":"Price"},"currency":{"type":"string","title":"Currency"},"bedrooms":{"type":"string","title":"Bedrooms"},"bathrooms":{"type":"string","title":"Bathrooms"},"m2":{"type":"string","title":"M2"},"location":{"type":"string","title":"Location"},"img":{"type":"string","title":"Img"},"url":{"type":"string","title":"Url"},"is_project":{"type":"boolean","title":"Is Project"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"available_visits":{"type":"integer","title":"Available Visits"}},"type":"object","required":["id","name","price","currency","bedrooms","bathrooms","m2","location","img","url","is_project","timestamp","created_at","available_visits"],"title":"PropertySummaryResponse","description":"Response model for property summary (used in listings)."},"PurchaseRequestListResponse":{"properties":{"requests":{"items":{"$ref":"#/components/schemas/PurchaseRequestResponse"},"type":"array","title":"Requests"},"total_count":{"type":"integer","title":"Total Count"},"page":{"type":"integer","title":"Page"},"limit":{"type":"integer","title":"Limit"},"total_pages":{"type":"integer","title":"Total Pages"}},"type":"object","required":["requests","total_count","page","limit","total_pages"],"title":"PurchaseRequestListResponse","description":"Response model for purchase requests list."},"PurchaseRequestResponse":{"properties":{"request_id":{"type":"string","title":"Request Id"},"group_id":{"type":"string","title":"Group Id"},"property_id":{"type":"string","title":"Property Id"},"property_name":{"type":"string","title":"Property Name"},"property_location":{"type":"string","title":"Property Location"},"property_url":{"type":"string","title":"Property Url"},"price":{"type":"number","title":"Price"},"currency":{"type":"string","title":"Currency"},"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"validated_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Validated At"},"validation_message":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Validation Message"}},"type":"object","required":["request_id","group_id","property_id","property_name","property_location","property_url","price","currency","status","timestamp","created_at"],"title":"PurchaseRequestResponse","description":"Response model for a purchase request."},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}},"tags":[{"name":"Properties Market API","description":"Core endpoints for managing properties and visit reservations"}],"servers":[{"url":"http://localhost:8000","description":"Development server"},{"url":"https://nicoriquelmecti.space","description":"Production server"}]}